# AI对话参数设置说明

本文档介绍了AI对话助手中新增的参数调整功能，包括上下文数量控制和流式传输等功能。

## 通用参数设置

在"设置"选项卡中，您可以找到"通用参数设置"部分，这里包含了控制AI对话行为的关键参数：

### 上下文窗口大小

- **功能**: 控制AI在回答问题时可以参考的历史对话轮数
- **默认值**: 10轮对话
- **调整范围**: 1-50轮
- **说明**: 
  - 较大的值可以让AI记住更长的对话历史，但可能会增加API调用费用
  - 较小的值可以减少API调用费用，但AI可能无法记住较早的对话内容
  - 值为0表示不限制上下文窗口大小(使用全部历史)

### 流式输出

- **功能**: 控制AI是否使用流式输出（逐字显示）回答
- **默认值**: 开启
- **说明**:
  - 开启时，AI回答会像打字一样逐字显示，使体验更自然
  - 关闭时，AI只会在完整生成回答后一次性显示
  - 流式输出能提供更好的用户体验，但在某些网络环境下可能不够稳定

### 温度

- **功能**: 控制AI回答的随机性/创造性
- **默认值**: 0.7
- **调整范围**: 0.0-1.0
- **说明**:
  - 较低的值(接近0)会使回答更加确定和保守
  - 较高的值(接近1)会使回答更加多样和创造性
  - 对于需要准确性的问题，建议使用较低的温度
  - 对于创意写作和头脑风暴，建议使用较高的温度
  - **新增**: 实时显示数值，直观把握参数设置

### 最大生成长度

- **功能**: 控制AI一次回答最多可以生成的token数量
- **默认值**: 2000 tokens
- **调整范围**: 100-16000 tokens
- **说明**:
  - 一个token大约相当于0.75个中文字或1.5个英文单词
  - 较大的值可以让AI生成更长的回答，但会增加API调用费用
  - 较小的值可以节省API调用费用，但可能导致回答不完整

## 使用建议

1. **日常聊天**: 使用默认设置即可获得良好体验
2. **长篇讨论**: 增加上下文窗口大小以保持连贯性
3. **专业咨询**: 降低温度(0.1-0.3)以获得更精确的回答
4. **创意写作**: 提高温度(0.8-1.0)以获得更有创意的内容
5. **网络不稳定环境**: 关闭流式输出以避免中断

## 对话格式优化

最新版本中，我们优化了对话的显示格式：

1. **用户消息**: 使用蓝色加粗的"【用户】"标签，更易于区分
2. **AI回复**: 使用绿色加粗的"【AI助手】"标签，提高可读性
3. **内容排版**: 标签单独一行，内容另起一行，使对话更加清晰

## 参数测试功能

在设置页面中，我们新增了"测试当前参数"按钮：

1. 点击此按钮会自动保存当前设置
2. 切换到聊天选项卡
3. 自动发送测试消息，立即体验当前参数效果
4. 可以通过AI的回复了解不同参数设置的影响

## 参数影响

不同的参数组合会影响AI的表现和API调用的费用：

| 上下文窗口 | 最大生成长度 | API费用 | 对话质量 |
|----------|------------|--------|--------|
| 小(≤5)    | 短(≤1000)   | 低     | 基本满足简单对话 |
| 中(6-15)  | 中(1000-4000)| 中等   | 适合大多数使用场景 |
| 大(>15)   | 长(>4000)   | 高     | 适合复杂专业讨论 |

## 注意事项

1. 某些API(如自定义API插件)可能不支持流式输出，此时系统会自动退回到标准输出模式
2. 参数设置保存在config/settings.json文件中，可以在关闭程序后依然保持
3. 不同模型的实际表现可能有所不同，建议根据实际使用效果调整参数 